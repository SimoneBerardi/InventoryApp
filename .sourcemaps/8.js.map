{"version":3,"sources":["../../src/pages/bag-details/bag-details.module.ts","../../src/pages/bag-details/bag-details.ts"],"names":[],"mappings":"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","file":"8.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { BagDetailsPage } from './bag-details';\r\nimport { TranslateModule } from \"@ngx-translate/core\";\r\n\r\n@NgModule({\r\n  declarations: [\r\n    BagDetailsPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(BagDetailsPage),\r\n    TranslateModule.forChild()\r\n  ],\r\n  exports: [\r\n    BagDetailsPage\r\n  ]\r\n})\r\nexport class BagDetailsPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bag-details/bag-details.module.ts","import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\r\nimport { Bag } from \"../../model/bag\";\r\nimport { SessionProvider } from '../../providers/session/session';\r\nimport { InterfaceProvider } from '../../providers/interface/interface';\r\nimport { TranslateProvider } from '../../providers/translate/translate';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-bag-details',\r\n  templateUrl: 'bag-details.html',\r\n})\r\nexport class BagDetailsPage {\r\n  bag: Bag;\r\n  name: string;\r\n  weight: string;\r\n  isFixedWeight: boolean;\r\n  capacity: string;\r\n\r\n  constructor(\r\n    public navCtrl: NavController,\r\n    public navParams: NavParams,\r\n    private _session: SessionProvider,\r\n    private _interface: InterfaceProvider,\r\n    private _translate: TranslateProvider,\r\n  ) {\r\n    if (navParams.data.bag) {\r\n      this.bag = navParams.data.bag;\r\n      this.name = this.bag.name;\r\n      this.weight = this.bag.weight.toString();\r\n      this.isFixedWeight = this.bag.isFixedWeight;\r\n      this.capacity = this.bag.capacity.toString();\r\n    }\r\n  }\r\n\r\n  get showDelete() {\r\n    return this._session.character.bags.length > 2;\r\n  }\r\n\r\n  cancel() {\r\n    this.navCtrl.pop();\r\n  }\r\n  save() {\r\n    this._validate();\r\n    this._session.saveCharacter();\r\n    this.navCtrl.pop();\r\n  }\r\n  delete() {\r\n    return this._translate.translate([\"ButtareBorsa\", \"ButtareBorsa?\", \"Si\", \"No\"]).then(values => {\r\n      let title = values[\"ButtareBorsa\"];\r\n      let message = values[\"ButtareBorsa?\"].replace(\"{0}\", this.bag.name);\r\n      return this._interface.askConfirmation(title, message);\r\n    }).then(isConfirmed => {\r\n      if (isConfirmed) {\r\n        return this._delete().then(() => {\r\n          return this.navCtrl.pop();\r\n        });\r\n      } else\r\n        return Promise.resolve();\r\n    }).catch(() => { });\r\n  }\r\n\r\n  private _delete() {\r\n    return this._askMoveItems().then(bag => {\r\n      if (bag != null) {\r\n        this.bag.items.forEach(bagItem => {\r\n          bag.addItem(bagItem.item, bagItem.quantity);\r\n        });\r\n      }\r\n      this._session.character.removeBag(this.bag);\r\n      return this._session.saveCharacter();\r\n    });\r\n  }\r\n  private _askMoveItems() {\r\n    if (this.bag.items.length > 0) {\r\n      return this._translate.translate([\"SpostamentoOggetti\", \"SpostareOggetti?\"]).then(values => {\r\n        let title = values[\"SpostamentoOggetti\"];\r\n        let message = values[\"SpostareOggetti?\"];\r\n        return this._interface.askConfirmation(title, message);\r\n      }).then(isConfirmed => {\r\n        if (isConfirmed)\r\n          return this._interface.selectBag(this._session.character);\r\n        else\r\n          return Promise.resolve(null);\r\n      });\r\n    } else\r\n      return Promise.resolve(null);\r\n  }\r\n\r\n  private _validate() {\r\n    this.bag.name = this.name;\r\n    this.bag.weight = parseFloat(this.weight);\r\n    this.bag.isFixedWeight = this.isFixedWeight;\r\n    this.bag.capacity = parseFloat(this.capacity);\r\n    if (this.bag.weight.toString() == \"\")\r\n      this.bag.weight = 0;\r\n    if (this.bag.isFixedWeight && this.bag.capacity.toString() == \"\")\r\n      this.bag.capacity = 0;\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bag-details/bag-details.ts"],"sourceRoot":""}